<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Eric Brown, Parita Shah, Julia Kim" />

<meta name="date" content="2019-09-26" />

<title>Using chlorpromazineR to calculate chlorpromazine-equivalent doses</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Using chlorpromazineR to calculate chlorpromazine-equivalent doses</h1>
<h4 class="author">Eric Brown, Parita Shah, Julia Kim</h4>
<h4 class="date">2019-09-26</h4>



<div id="background" class="section level2">
<h2>Background</h2>
<p>Studies investigating or controlling for the impact of antipsychotic medications often need to quantify the amount of medication to which an individual is or has been exposed. As different antipsychotics have different potencies, the task is more complicated than using each medication’s daily dosage in milligrams, for example. Further complicating the matter is that antipsychotic medications have different formulations including oral medications, and injectable formulations that are either short- or long-acting (also called depots). A commonly used strategy to account for the differing potencies is to calculate the equivalent dose of each medication in terms of a reference medication.</p>
<p>Chlorpromazine (CPZ) is an antipsychotic medication most often used for this purpose. A CPZ-equivalent dose is typically defined as a dose of antipsychotic that is comparable to 100 mg of CPZ.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> The total daily dose of a medication expressed in milligrams of CPZ per day is the daily-dose equivalent, and is commonly utilized in both clinical and research settings.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> Both strategies allow the dose of one medication, such as quetiapine, to be expressed in equivalents of chlorpromazine.</p>
<p>There are various approaches to defining dose equivalents, including the “defined daily doses” (Methodology WCCfDS, 2013), and Delphie methods.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> Defined daily doses, which are produced by the World Health Organization, provide an estimate of the average maintenance antipsychotic daily dose required for a 70-kg adult with psychosis.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> On the other hand, the Delphi method is an approach to reach a consensus to antipsychotic dose equivalents based on a two-stage, questionnaire-based survey of experts.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> Using the doses defined through these methods, equivalency ratio for each antipsychotic can be calculated, with CPZ as a reference medication (i.e. x mg/day of antipsychotic A is equal to 1 mg/day CPZ).</p>
<p>While there is no single standard method to defining dose equivalence, the International Consensus Study by Gardner et al. (2010), which used the Delphi method,<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> is a widely used resource to calculate equivalency ratios.</p>
</div>
<div id="chlorpromaziner" class="section level2">
<h2>chlorpromazineR</h2>
<p>We present here an easy-to-use R package to calculate CPZ daily dose equivalents for common oral and injectable antipsychotic medications. We do not propose to suggest which conversion factors are appropriate to use, or how to interpret the converted data. All users should also refer to the papers from which the conversion factor data originates to determine whether the use of such data is appropriate for their study.</p>
<p>With this package, we hope:</p>
<ul>
<li>to improve transparency and consistency in calculating CPZ equivalents,</li>
<li>to reduce human error and improve accuracy,</li>
<li>and to simplify workflows for large datasets, as from chart reviews of electronic health records.</li>
</ul>
<p>We use the data from the International Consensus Study (Gardner et al. 2010) as the default conversion “key”. We also include keys generated from the most widely cited papers on CPZ equivalence. The user can also create their own keys (and contribute them to this package), which are <code>list</code> objects as described below.</p>
<p>While the default key is <code>gardner2010</code>, derived from the 2010 paper by Gardner et al, no equivalency was provided for short acting vs. oral chlorpromazine, so <code>gardner2010</code> only includes oral and long acting injectable conversion factors. However, the SAI equivalencies are available in terms of chlorpromazine SAI equivalents, so to use that data knowing this limitation, the key <code>gardner2010_withsai</code> is available if needed. The SAI values calculated could then be converted using an external reference value).</p>
<div id="input-data-structure" class="section level3">
<h3>Input data structure</h3>
<p>The data is assumed to be stored in a <code>data.frame</code> where each row represents a participant, and with the required variables stored in columns. The two variables always required are the antipsychotic names and the dose to convert. The generic name of the medication must be used. There are differing conventions for drug name abbreviations, and different brand names around the world, so brand names are not built into the package.</p>
<p>For oral medications or short-acting injectables, the dose is converted directly, i.e. not accounting for dosing frequencies, which must be done separately. The exception is for long-acting injectables (LAIs), which converts to daily equivalent oral CPZ dose by dividing by the frequency of administration in days. Thus when using LAIs, a third variable, the administration frequency in days, must be available, unless the stored doses have already been divided by the administration frequency.</p>
</div>
<div id="key-data-structure" class="section level3">
<h3>Key data structure</h3>
<p>The conversion factors are stored in “keys”. A key is a <code>list</code> object containing 3 named sub-<code>lists</code>: <code>oral</code>, <code>sai</code> and <code>lai</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">names</span>(gardner2010)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">#&gt; [1] &quot;oral&quot; &quot;sai&quot;  &quot;lai&quot;</span></a></code></pre></div>
<p>Each sub-<code>list</code> is itself a named list where the names are the antipsychotic names, and the values are the conversion factors.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">names</span>(gardner2010<span class="op">$</span>oral)[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt; [1] &quot;chlorpromazine&quot; &quot;amisulpride&quot;    &quot;aripiprazole&quot;   &quot;benperidol&quot;    </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; [5] &quot;clopenthixol&quot;</span></a></code></pre></div>
<p>The conversion factor is what a given dose needs to be multiplied by to get the CPZ-equivalent.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">gardner2010<span class="op">$</span>oral<span class="op">$</span>aripiprazole</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; [1] 20</span></a></code></pre></div>
<p>For example, with aripiprazole, the value is 20, meaning that the CPZ-equivalent dose of aripiprazole 5 mg is <code>5 * 20 = 100</code>.</p>
</div>
</div>
<div id="tutorial" class="section level2">
<h2>Tutorial</h2>
<div id="example-for-one-route-only" class="section level3">
<h3>Example for one route only</h3>
<p>To demonstrate with a simple example using only oral medications, consider the following data:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">participant_ID &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;P01&quot;</span>, <span class="st">&quot;P02&quot;</span>, <span class="st">&quot;P03&quot;</span>, <span class="st">&quot;P04&quot;</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">age &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">42</span>, <span class="dv">29</span>, <span class="dv">30</span>, <span class="dv">60</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">antipsychotic &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;olanzapine&quot;</span>, <span class="st">&quot;olanzapine&quot;</span>, <span class="st">&quot;quetiapine&quot;</span>, <span class="st">&quot;ziprasidone&quot;</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">dose &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="fl">12.5</span>, <span class="dv">300</span>, <span class="dv">60</span>)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">example_oral &lt;-<span class="st"> </span><span class="kw">data.frame</span>(participant_ID, age, antipsychotic, dose, </a>
<a class="sourceLine" id="cb4-6" data-line-number="6">                           <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">example_oral</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;   participant_ID age antipsychotic  dose</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; 1            P01  42    olanzapine  10.0</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; 2            P02  29    olanzapine  12.5</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; 3            P03  30    quetiapine 300.0</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; 4            P04  60   ziprasidone  60.0</span></a></code></pre></div>
<p>In this case we have <code>example_oral</code>, a <code>data.frame</code>, with one row per participant, and a variable for the antipsychotic name, labeled <code>antipsychotic</code> and a variable for the dose, named <code>dose</code>.</p>
<p>To calculate CPZ-equivalent doses, use the <code>to_cpz()</code> function:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">to_cpz</span>(example_oral, <span class="dt">ap_label =</span> <span class="st">&quot;antipsychotic&quot;</span>, <span class="dt">dose_label =</span> <span class="st">&quot;dose&quot;</span>, </a>
<a class="sourceLine" id="cb5-2" data-line-number="2">       <span class="dt">route =</span> <span class="st">&quot;oral&quot;</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt;   participant_ID age antipsychotic  dose cpz_conv_factor cpz_eq</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; 1            P01  42    olanzapine  10.0           30.00    300</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; 2            P02  29    olanzapine  12.5           30.00    375</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; 3            P03  30    quetiapine 300.0            0.80    240</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; 4            P04  60   ziprasidone  60.0            3.75    225</span></a></code></pre></div>
<p>Notice that 2 new columns appear, which are named based on the default arguments in <code>to_cpz()</code>. The CPZ-equivalent doses are in the column labeled <code>cpz_eq</code>.</p>
</div>
<div id="example-for-data-with-oral-and-injectable-routes" class="section level3">
<h3>Example for data with oral and injectable routes</h3>
<p>The default key from the study by Gardner et al. included dosing equivalents for oral medications, short acting injectables and long-acting injectables. If the original data includes more than one of these routes, the <code>route</code> argument can be set to “mixed”.</p>
<p>In this case, more information is required to calculate the equivalent doses. Specifically, a variable to indicate the route (“oral”, “sai”, or “lai”) is required, and if long-acting injectables are used, then the injection frequency is also required.*</p>
<p>*If the doses have already manually been divided by the frequency, then setting the <code>q</code> parameter to <code>1</code> will forgo the need to specify a variable storing the frequency information.</p>
<p>Here is some example data:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">example_lai &lt;-<span class="st"> </span>example_oral</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">example_lai<span class="op">$</span>participant_ID &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;P05&quot;</span>, <span class="st">&quot;P06&quot;</span>, <span class="st">&quot;P07&quot;</span>, <span class="st">&quot;P08&quot;</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">example_lai<span class="op">$</span>antipsychotic &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;zuclopenthixol decanoate&quot;</span>, </a>
<a class="sourceLine" id="cb6-4" data-line-number="4">                               <span class="st">&quot;zuclopenthixol decanoate&quot;</span>, </a>
<a class="sourceLine" id="cb6-5" data-line-number="5">                               <span class="st">&quot;perphenazine enanthate&quot;</span>, <span class="st">&quot;fluspirilene&quot;</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">example_lai<span class="op">$</span>q &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">14</span>, <span class="dv">21</span>, <span class="dv">14</span>, <span class="dv">14</span>)</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">example_lai<span class="op">$</span>dose &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">200</span>, <span class="dv">200</span>, <span class="dv">50</span>, <span class="dv">6</span>)</a>
<a class="sourceLine" id="cb6-8" data-line-number="8"></a>
<a class="sourceLine" id="cb6-9" data-line-number="9">example_sai &lt;-<span class="st"> </span>example_oral</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">example_sai<span class="op">$</span>participant_ID &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;P09&quot;</span>, <span class="st">&quot;P10&quot;</span>, <span class="st">&quot;P11&quot;</span>, <span class="st">&quot;P12&quot;</span>)</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">example_sai<span class="op">$</span>antipsychotic &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Chlorpromazine HCl&quot;</span>, <span class="st">&quot;Loxapine HCl&quot;</span>, </a>
<a class="sourceLine" id="cb6-12" data-line-number="12">                               <span class="st">&quot;Olanzapine tartrate&quot;</span>, <span class="st">&quot;Olanzapine tartrate&quot;</span>)</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">example_sai<span class="op">$</span>dose &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">10</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-14" data-line-number="14"></a>
<a class="sourceLine" id="cb6-15" data-line-number="15">example_oral<span class="op">$</span>q &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16">example_sai<span class="op">$</span>q &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"></a>
<a class="sourceLine" id="cb6-18" data-line-number="18">example_oral<span class="op">$</span>route &lt;-<span class="st"> &quot;oral&quot;</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19">example_lai<span class="op">$</span>route &lt;-<span class="st"> &quot;lai&quot;</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20">example_sai<span class="op">$</span>route &lt;-<span class="st"> &quot;sai&quot;</span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"></a>
<a class="sourceLine" id="cb6-22" data-line-number="22">example_mixed &lt;-<span class="st"> </span><span class="kw">rbind</span>(example_oral, example_sai, example_lai)</a>
<a class="sourceLine" id="cb6-23" data-line-number="23"></a>
<a class="sourceLine" id="cb6-24" data-line-number="24">example_mixed</a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt;    participant_ID age            antipsychotic  dose  q route</span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#&gt; 1             P01  42               olanzapine  10.0 NA  oral</span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">#&gt; 2             P02  29               olanzapine  12.5 NA  oral</span></a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="co">#&gt; 3             P03  30               quetiapine 300.0 NA  oral</span></a>
<a class="sourceLine" id="cb6-29" data-line-number="29"><span class="co">#&gt; 4             P04  60              ziprasidone  60.0 NA  oral</span></a>
<a class="sourceLine" id="cb6-30" data-line-number="30"><span class="co">#&gt; 5             P09  42       Chlorpromazine HCl 100.0 NA   sai</span></a>
<a class="sourceLine" id="cb6-31" data-line-number="31"><span class="co">#&gt; 6             P10  29             Loxapine HCl  50.0 NA   sai</span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32"><span class="co">#&gt; 7             P11  30      Olanzapine tartrate  10.0 NA   sai</span></a>
<a class="sourceLine" id="cb6-33" data-line-number="33"><span class="co">#&gt; 8             P12  60      Olanzapine tartrate   5.0 NA   sai</span></a>
<a class="sourceLine" id="cb6-34" data-line-number="34"><span class="co">#&gt; 9             P05  42 zuclopenthixol decanoate 200.0 14   lai</span></a>
<a class="sourceLine" id="cb6-35" data-line-number="35"><span class="co">#&gt; 10            P06  29 zuclopenthixol decanoate 200.0 21   lai</span></a>
<a class="sourceLine" id="cb6-36" data-line-number="36"><span class="co">#&gt; 11            P07  30   perphenazine enanthate  50.0 14   lai</span></a>
<a class="sourceLine" id="cb6-37" data-line-number="37"><span class="co">#&gt; 12            P08  60             fluspirilene   6.0 14   lai</span></a></code></pre></div>
<p>The function <code>to_cpz()</code> is used similarly as above, with the extra variable names (route_label, q) specified:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">to_cpz</span>(example_mixed, <span class="dt">ap_label =</span> <span class="st">&quot;antipsychotic&quot;</span>, <span class="dt">dose_label =</span> <span class="st">&quot;dose&quot;</span>, </a>
<a class="sourceLine" id="cb7-2" data-line-number="2">       <span class="dt">route =</span> <span class="st">&quot;mixed&quot;</span>, <span class="dt">route_label =</span> <span class="st">&quot;route&quot;</span>, <span class="dt">q_label =</span> <span class="st">&quot;q&quot;</span>, <span class="dt">key=</span>gardner2010_withsai) </a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt;    participant_ID age            antipsychotic  dose  q route</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; 1             P01  42               olanzapine  10.0 NA  oral</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; 2             P02  29               olanzapine  12.5 NA  oral</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; 3             P03  30               quetiapine 300.0 NA  oral</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; 4             P04  60              ziprasidone  60.0 NA  oral</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; 5             P09  42       chlorpromazine hcl 100.0 NA   sai</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; 6             P10  29             loxapine hcl  50.0 NA   sai</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 7             P11  30      olanzapine tartrate  10.0 NA   sai</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; 8             P12  60      olanzapine tartrate   5.0 NA   sai</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; 9             P05  42 zuclopenthixol decanoate 200.0 14   lai</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; 10            P06  29 zuclopenthixol decanoate 200.0 21   lai</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; 11            P07  30   perphenazine enanthate  50.0 14   lai</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; 12            P08  60             fluspirilene   6.0 14   lai</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt;    cpz_conv_factor cpz_eq</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; 1            30.00    300</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; 2            30.00    375</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt; 3             0.80    240</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt; 4             3.75    225</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt; 5             1.00    100</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt; 6             4.00    200</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt; 7            10.00    100</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">#&gt; 8            10.00     50</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt; 9            42.00    600</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt; 10           42.00    400</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt; 11           84.00    300</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt; 12          700.00    300</span></a></code></pre></div>
</div>
<div id="participants-on-multiple-medications" class="section level3">
<h3>Participants on multiple medications</h3>
<p>If the included participants are on multiple medications, then the name and dose of the antipsychotic should be specified as separate variables in the <code>data.frame</code>. In this case, <code>to_cpz()</code> can be used multiple times, each time specifying the appropriate variables. Run it first specifying the name and dose of the first medication, and then run it again specifying the name and dose of the second medication. Be sure to change the name of the <code>eq_label</code> where the result will be stored.</p>
</div>
</div>
<div id="checking-for-inclusion-and-matching-of-antipsychotic-names" class="section level2">
<h2>Checking for inclusion and matching of antipsychotic names</h2>
<p>The software depends on an exact match (except for case) of the generic names of antipsychotics. To check if there are rows that do not match, <code>check_ap()</code> can be used. Here is an example of data where all the antipsychotic names match the key, showing that 0 is returned (the number of mismatches):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">check_ap</span>(example_oral, <span class="dt">ap_label =</span> <span class="st">&quot;antipsychotic&quot;</span>, <span class="dt">route =</span> <span class="st">&quot;oral&quot;</span>, <span class="dt">key=</span>gardner2010)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; [1] 0</span></a></code></pre></div>
<p>When there are mismatches, they are listed, and the number is returned:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">example_sai &lt;-<span class="st"> </span>example_sai</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">check_ap</span>(example_sai, <span class="dt">ap_label =</span> <span class="st">&quot;antipsychotic&quot;</span>, <span class="dt">route =</span> <span class="st">&quot;sai&quot;</span>, <span class="dt">key=</span>gardner2010)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; The following antipsychotics were not found in the key:</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; Chlorpromazine HCl (sai)</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; Loxapine HCl (sai)</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; Olanzapine tartrate (sai)</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; Olanzapine tartrate (sai)</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
<p>As with <code>to_cpz()</code>, mixed routes can be used with <code>check_ap()</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">example_mixed_bad &lt;-<span class="st"> </span>example_mixed</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">example_mixed_bad[<span class="dv">1</span>,<span class="dv">3</span>] &lt;-<span class="st"> &quot;olanzzzzapine&quot;</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">example_mixed_bad[<span class="dv">4</span>,<span class="dv">3</span>] &lt;-<span class="st"> &quot;Seroquel&quot;</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4">example_mixed_bad[<span class="dv">5</span>,<span class="dv">3</span>] &lt;-<span class="st"> &quot;chlorpromazineHCl&quot;</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">example_mixed_bad[<span class="dv">9</span>,<span class="dv">3</span>] &lt;-<span class="st"> &quot;zuclo decanoate&quot;</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="kw">check_ap</span>(example_mixed_bad, <span class="dt">ap_label =</span> <span class="st">&quot;antipsychotic&quot;</span>, </a>
<a class="sourceLine" id="cb10-7" data-line-number="7">         <span class="dt">route =</span> <span class="st">&quot;mixed&quot;</span>, <span class="dt">route_label =</span> <span class="st">&quot;route&quot;</span>, <span class="dt">key=</span>gardner2010_withsai)</a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; The following antipsychotics were not found in the key:</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt; olanzzzzapine (oral)</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt; Seroquel (oral)</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt; chlorpromazineHCl (sai)</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt; zuclo decanoate (lai)</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
<p>While the default <code>gardner2010</code> key uses the full antipsychotic name for SAI and LAI formulations (e.g. Chlorpromazine HCl) in order to be consistent with the publication and reduce the risk of errors due to ambiguity, the use can modify the key to “trim” the antipsychotic names to just 1 word (e.g. chlorpromazine).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">names</span>(gardner2010<span class="op">$</span>lai)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;clopenthixol decanoate&quot;   &quot;flupenthixol decanoate&quot;  </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#&gt;  [3] &quot;fluphenazine decanoate&quot;   &quot;fluphenazine enanthate&quot;  </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt;  [5] &quot;fluspirilene&quot;             &quot;haloperidol decanoate&quot;   </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt;  [7] &quot;perphenazine enanthate&quot;   &quot;pipotiazine palmitate&quot;   </span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt;  [9] &quot;risperidone microspheres&quot; &quot;zuclopenthixol decanoate&quot;</span></a></code></pre></div>
<p>To trim to 1-word antipsychotic names, we have made the <code>trim_key()</code> function, which takes a key and generates a new key from it with the 1-word antipsychotic labels. If you want to use the <code>gardner2010</code> key but want 1-word antipsychotic names, then you can use <code>trim_key</code> to generate that new key, which you can then use in <code>to_cpz()</code>. For example:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">trimmed_gardner &lt;-<span class="st"> </span><span class="kw">trim_key</span>(gardner2010)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; The trim_key() function can introduce errors if used in improper</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt;            circumstances. Ensure that the antipsychotic compounds in your data</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt;            and in the intended keys are the same compounds. The trim function is</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt;            for convenience, but would introduce errors in your data if the</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt;            compounds are not equivalent.</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="kw">names</span>(trimmed_gardner<span class="op">$</span>lai)</a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt;  [1] &quot;clopenthixol&quot;   &quot;flupenthixol&quot;   &quot;fluphenazine&quot;   &quot;fluphenazine&quot;  </span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt;  [5] &quot;fluspirilene&quot;   &quot;haloperidol&quot;    &quot;perphenazine&quot;   &quot;pipotiazine&quot;   </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;  [9] &quot;risperidone&quot;    &quot;zuclopenthixol&quot;</span></a></code></pre></div>
</div>
<div id="using-other-keys" class="section level2">
<h2>Using other keys</h2>
<p>The above examples have used the default CPZ conversion key, <code>gardner2010</code>, based on data extracted from Gardner et al. 2010. However, not all antipsychotic medications were included in that study. This package also includes a key extracted from the data included in the Leucht et al. 2016 publication based on the World Health Organization’s Defined Daily Doses. To explicitly change the CPZ key, use the key parameter when calling <code>to_cpz()</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">to_cpz</span>(example_oral, <span class="dt">ap_label =</span> <span class="st">&quot;antipsychotic&quot;</span>, <span class="dt">dose_label =</span> <span class="st">&quot;dose&quot;</span>, </a>
<a class="sourceLine" id="cb13-2" data-line-number="2">       <span class="dt">route =</span> <span class="st">&quot;oral&quot;</span>, <span class="dt">key =</span> leucht2016)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt;   participant_ID age antipsychotic  dose  q route cpz_conv_factor   cpz_eq</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; 1            P01  42    olanzapine  10.0 NA  oral      30.0300300 300.3003</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; 2            P02  29    olanzapine  12.5 NA  oral      30.0300300 375.3754</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; 3            P03  30    quetiapine 300.0 NA  oral       0.7500188 225.0056</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; 4            P04  60   ziprasidone  60.0 NA  oral       3.7495313 224.9719</span></a></code></pre></div>
<p>However, the authors do not recommend using the DDD values when more scientific values are available. Therefore, it can be desirable to create a new key with data from the <code>gardner2010</code> key (or your own created key) combined with the <code>leucht2016</code> key, using data from <code>gardner2010</code> key where possible.</p>
<p>For this purpose, we have created the <code>add_key()</code> function, which takes a preferred base key from which ALL available values are taken, and adds only the missing antipsychotic conversion values from the second key to be added. Further, there is a <code>trim</code> parameter, which invokes the <code>trim_key()</code> function on both keys, in the case as in <code>leucht2016</code> where only 1-word antipsychotic names are provided.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">gardner_leucht &lt;-<span class="st"> </span><span class="kw">add_key</span>(<span class="dt">base =</span> gardner2010, <span class="dt">add =</span> leucht2016, <span class="dt">trim =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; The trim_key() function can introduce errors if used in improper</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt;            circumstances. Ensure that the antipsychotic compounds in your data</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt;            and in the intended keys are the same compounds. The trim function is</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;            for convenience, but would introduce errors in your data if the</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt;            compounds are not equivalent.</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; The trim_key() function can introduce errors if used in improper</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt;            circumstances. Ensure that the antipsychotic compounds in your data</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt;            and in the intended keys are the same compounds. The trim function is</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt;            for convenience, but would introduce errors in your data if the</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt;            compounds are not equivalent.</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt; 24 (ORAL) were added to the base key (acepromazine, acetophenazine, asenapine, bromperidol, butaperazine, chlorprothixene, dixyrazine, flupentixol, levosulpiride, lurasidone, melperone, moperone, penfluridol, perazine, periciazine, pipamperone, pipotiazine, promazine, prothipendyl, sultopride, thiopropazate, thioproperazine, tiapride, tiotixene) </span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt; 30 (SAI) were added to the base key (acepromazine, aripiprazole, bromperidol, chlorpromazine, chlorprothixene, clopenthixol, clotiapine, clozapine, dixyrazine, droperidol, haloperidol, levomepromazine, melperone, mesoridazine, moperone, olanzapine, perazine, periciazine, perphenazine, prochlorperazine, promazine, prothipendyl, remoxipride, sulpiride, thioproperazine, tiapride, trifluoperazine, triflupromazine, ziprasidone, zuclopenthixol) </span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt; 4 (LAI) were added to the base key (bromperidol, flupentixol, olanzapine, paliperidone)</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="kw">names</span>(gardner_leucht<span class="op">$</span>sai)</a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt;  [1] &quot;acepromazine&quot;     &quot;aripiprazole&quot;     &quot;bromperidol&quot;     </span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">#&gt;  [4] &quot;chlorpromazine&quot;   &quot;chlorprothixene&quot;  &quot;clopenthixol&quot;    </span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">#&gt;  [7] &quot;clotiapine&quot;       &quot;clozapine&quot;        &quot;dixyrazine&quot;      </span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">#&gt; [10] &quot;droperidol&quot;       &quot;haloperidol&quot;      &quot;levomepromazine&quot; </span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">#&gt; [13] &quot;melperone&quot;        &quot;mesoridazine&quot;     &quot;moperone&quot;        </span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">#&gt; [16] &quot;olanzapine&quot;       &quot;perazine&quot;         &quot;periciazine&quot;     </span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25"><span class="co">#&gt; [19] &quot;perphenazine&quot;     &quot;prochlorperazine&quot; &quot;promazine&quot;       </span></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co">#&gt; [22] &quot;prothipendyl&quot;     &quot;remoxipride&quot;      &quot;sulpiride&quot;       </span></a>
<a class="sourceLine" id="cb14-27" data-line-number="27"><span class="co">#&gt; [25] &quot;thioproperazine&quot;  &quot;tiapride&quot;         &quot;trifluoperazine&quot; </span></a>
<a class="sourceLine" id="cb14-28" data-line-number="28"><span class="co">#&gt; [28] &quot;triflupromazine&quot;  &quot;ziprasidone&quot;      &quot;zuclopenthixol&quot;</span></a></code></pre></div>
<p>Let’s change a value in the <code>example_oral</code> data so that there is an antipsychotic that is not listed in the <code>gardner2010</code> key: asenapine.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">other_oral &lt;-<span class="st"> </span>example_oral</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">other_oral[<span class="dv">2</span>,<span class="dv">3</span>] &lt;-<span class="st"> &quot;asenapine&quot;</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">other_oral[<span class="dv">2</span>,<span class="dv">4</span>] &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="kw">check_ap</span>(other_oral, <span class="dt">ap_label =</span> <span class="st">&quot;antipsychotic&quot;</span>, <span class="dt">route =</span> <span class="st">&quot;oral&quot;</span>)</a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; The following antipsychotics were not found in the key:</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; asenapine (oral)</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
<p>We can see that asenapine is not in the default key. We could use the <code>leucht2016</code> key:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">to_cpz</span>(other_oral, <span class="dt">ap_label =</span> <span class="st">&quot;antipsychotic&quot;</span>, <span class="dt">dose_label =</span> <span class="st">&quot;dose&quot;</span>, </a>
<a class="sourceLine" id="cb16-2" data-line-number="2">       <span class="dt">route =</span> <span class="st">&quot;oral&quot;</span>, <span class="dt">key =</span> gardner_leucht)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt;   participant_ID age antipsychotic dose  q route cpz_conv_factor  cpz_eq</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt; 1            P01  42    olanzapine   10 NA  oral         30.0000 300.000</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt; 2            P02  29     asenapine   10 NA  oral         14.9925 149.925</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt; 3            P03  30    quetiapine  300 NA  oral          0.8000 240.000</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; 4            P04  60   ziprasidone   60 NA  oral          3.7500 225.000</span></a></code></pre></div>
<p>Note that it used the <code>gardner2010</code> values where they were available (olanzapine, quetiapine, ziprasidone) and the <code>leucht2016</code> key for asenapine.</p>
<p>To draw from values from additional keys (e.g. user-created keys), the <code>add_key()</code> function could be used iteratively. The first argument of <code>add_key()</code>, <code>base</code>, is always the key with values that take priority.</p>
</div>
<div id="list-of-included-keys" class="section level2">
<h2>List of included keys</h2>
<p>Use the built in help function to see the full reference for any key, e.g. <code>help(davis1974)</code>. The data may need to be loaded prior to using the help function (e.g. load via <code>chlorpromazineR::davis1974</code>, then use <code>help(davis1974)</code>.</p>
<table>
<colgroup>
<col width="29%"></col>
<col width="32%"></col>
<col width="38%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Key name</th>
<th>Reference</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>davis1974</td>
<td><a href="https://doi.org/10.1016/0022-3956(74)90071-5" class="uri">https://doi.org/10.1016/0022-3956(74)90071-5</a></td>
<td>Classic paper on chlorpromazine equivalent doses.</td>
</tr>
<tr class="even">
<td>gardner2010</td>
<td><a href="https://doi.org/10.1176/appi.ajp.2009.09060802" class="uri">https://doi.org/10.1176/appi.ajp.2009.09060802</a></td>
<td>Consensus study.</td>
</tr>
<tr class="odd">
<td>gardner2010_withsai</td>
<td><a href="https://doi.org/10.1176/appi.ajp.2009.09060802" class="uri">https://doi.org/10.1176/appi.ajp.2009.09060802</a></td>
<td>The included SAI data result in equivalent to SAI (parenteral) chlorpromazine, not oral.</td>
</tr>
<tr class="even">
<td>leucht2016</td>
<td><a href="https://doi.org/10.1093/schbul/sbv167" class="uri">https://doi.org/10.1093/schbul/sbv167</a></td>
<td>WHO DDD method.</td>
</tr>
<tr class="odd">
<td>woods2003</td>
<td><a href="https://doi.org/10.4088/JCP.v64n0607" class="uri">https://doi.org/10.4088/JCP.v64n0607</a></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="converting-to-equivalents-of-an-arbitrary-antipsychotic" class="section level2">
<h2>Converting to equivalents of an arbitrary antipsychotic</h2>
<p>Historically, CPZ has been used as the reference antipsychotic. However, using the same key data, any arbitrary reference antipsychotic could be used. Similar to <code>to_cpz()</code>, <code>to_ap()</code> can perform this conversion. The desired reference antipsychotic can be specified, e.g. with the parameters <code>convert_to_ap = &quot;olanzapine&quot;, convert_to_route = &quot;oral&quot;</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">to_ap</span>(other_oral, <span class="dt">convert_to_ap =</span> <span class="st">&quot;olanzapine&quot;</span>, <span class="dt">convert_to_route =</span> <span class="st">&quot;oral&quot;</span>, </a>
<a class="sourceLine" id="cb17-2" data-line-number="2">      <span class="dt">ap_label =</span> <span class="st">&quot;antipsychotic&quot;</span>, <span class="dt">dose_label =</span> <span class="st">&quot;dose&quot;</span>, </a>
<a class="sourceLine" id="cb17-3" data-line-number="3">      <span class="dt">route =</span> <span class="st">&quot;oral&quot;</span>, <span class="dt">key =</span> gardner_leucht)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt;   participant_ID age antipsychotic dose  q route cpz_conv_factor  cpz_eq</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt; 1            P01  42    olanzapine   10 NA  oral         30.0000 300.000</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; 2            P02  29     asenapine   10 NA  oral         14.9925 149.925</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt; 3            P03  30    quetiapine  300 NA  oral          0.8000 240.000</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">#&gt; 4            P04  60   ziprasidone   60 NA  oral          3.7500 225.000</span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">#&gt;       ap_eq</span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt; 1 10.000000</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt; 2  4.997501</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">#&gt; 3  8.000000</span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#&gt; 4  7.500000</span></a></code></pre></div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Davis, J. M. (1974). Dose equivalence of the antipsychotic drugs. Journal of Psychiatric Research, 1, 65–69.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Danivas, V., &amp; Venkatasubramanian, G. (2013). Current perspectives on chlorpromazine equivalents: Comparing apples and oranges! Indian Journal of Psychiatry, 55(2), 207–208. <a href="https://doi.org/10.4103/0019-5545.111475" class="uri">https://doi.org/10.4103/0019-5545.111475</a><a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>Dalkey, N. (1969). The Delphi Method: An Experimental Study of Group Opinion | RAND. Retrieved from <a href="https://www.rand.org/pubs/research_memoranda/RM5888.html" class="uri">https://www.rand.org/pubs/research_memoranda/RM5888.html</a><a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>Leucht, S., Samara, M., Heres, S., &amp; Davis, J. M. (2016). Dose Equivalents for Antipsychotic Drugs: The DDD Method. Schizophrenia Bulletin, 42(suppl_1), S90–S94. <a href="https://doi.org/10.1093/schbul/sbv167" class="uri">https://doi.org/10.1093/schbul/sbv167</a><a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>Hasson, F., Keeney, S., &amp; McKenna, H. (2000). Research guidelines for the Delphi survey technique. Journal of Advanced Nursing, 32(4), 1008–1015.<a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>Gardner, D. M., Murphy, A. L., O’Donnell, H., Centorrino, F., &amp; Baldessarini, R. J. (2010). International consensus study of antipsychotic dosing. The American Journal of Psychiatry, 167(6), 686–693. <a href="https://doi.org/10.1176/appi.ajp.2009.09060802" class="uri">https://doi.org/10.1176/appi.ajp.2009.09060802</a><a href="#fnref6" class="footnote-back">↩</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
